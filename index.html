<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para Diana</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Dancing+Script:wght@500&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  font-family:'Montserrat',sans-serif;
  overflow:hidden;
  background:radial-gradient(circle at top,#2b0f55,#09010f);
  color:white;
}

canvas{
  position:fixed;
  inset:0;
  z-index:0;
}

.container{
  position:relative;
  z-index:1;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px;
}

.card{
  background:rgba(15,10,25,.88);
  backdrop-filter:blur(10px);
  width:min(520px,94vw);
  padding:50px 40px;
  border-radius:30px;
  text-align:center;
  box-shadow:0 0 60px rgba(160,120,255,.5);
}

h1{
  font-family:'Playfair Display',serif;
  font-size:30px;
  margin-bottom:8px;
}

.intro{
  font-family:'Dancing Script',cursive;
  font-size:24px;
  margin-bottom:18px;
  line-height:1.4;
}

.question{
  font-size:22px;
  font-weight:600;
  margin-bottom:30px;
}

.buttons{
  display:flex;
  justify-content:center;
  gap:24px;
}

button{
  min-width:160px;
  padding:12px 26px;
  border:none;
  border-radius:30px;
  font-size:16px;
  cursor:pointer;
  transition:.3s;
}

#yesBtn{
  background:linear-gradient(135deg,#7b2cbf,#c77dff);
  color:white;
  box-shadow:0 0 15px rgba(199,125,255,.6);
}

#noBtn{
  background:#444;
  color:white;
}

.sad-gif{
  display:none;
  margin-top:25px;
}

.sad-gif img{
  width:200px;
  border-radius:16px;
}

.letter{
  display:none;
  max-height:70vh;
  overflow-y:auto;
  margin-top:30px;
  text-align:left;
  font-size:16px;
  line-height:1.7;
  animation:fadeIn 1.5s ease forwards;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:none}
}

.letter p{margin-bottom:14px}
</style>
</head>

<body>

<canvas id="particles"></canvas>

<div class="container">
<div class="card">

<!-- üîπ PRELUDIO COMPLETO -->
<div id="prelude">
  <h1>Diana,</h1>

  <div class="intro">
    despu√©s de tantos videos y se√±ales,<br>
    creo que ya sabes qu√© voy a preguntar‚Ä¶ de verdad.
  </div>

  <div class="question" id="question">
    ¬øQuieres ser mi San Valent√≠n?
  </div>

  <div class="buttons" id="buttons">
    <button id="yesBtn">S√≠ ‚ò∫Ô∏è</button>
    <button id="noBtn">No üòî</button>
  </div>

  <div class="sad-gif" id="sadGif">
    <img src="https://media.giphy.com/media/ISOckXUybVfQ4/giphy.gif" alt="triste">
  </div>
</div>

<!-- üîπ CARTA FINAL (SIN PRELUDIO) -->
<div class="letter" id="letter">
  <p>Hoy no quiero decirte ‚ÄúFeliz San Valent√≠n‚Äù como si fuera una fecha cualquiera.</p>
  <p>Quiero decirte que me gusta amarte. Me gusta la forma en que est√°s en mi vida, sin ruido y sin esfuerzo, como algo que simplemente pertenece ah√≠.</p>
  <p>Me gusta c√≥mo el mundo se siente un poco m√°s en calma cuando pienso en ti.</p>
  <p>No estoy contigo por razones que se puedan enumerar.</p>
  <p>Estoy contigo porque tu presencia se volvi√≥ hogar. Porque tu nombre me nace con cari√±o. Porque elegirte no se siente como una decisi√≥n dif√≠cil‚Ä¶ sino como la correcta.</p>
  <p>Hay algo muy bonito en saber que eres t√∫. En saber que no necesito buscar m√°s ni imaginar otros caminos.</p>
  <p>No estoy contigo por lo f√°cil.</p>
  <p>Estoy contigo porque cuando decidimos ir a por todo‚Ä¶ fue real.</p>
  <p>Me gusta que no somos perfectos. Me gusta que construimos con conciencia. Me gusta que quieras dar, aportar y estar a la altura, al igual que yo lo intento.</p>
  <p>No quiero una vida donde todo sea sencillo.</p>
  <p>Quiero una vida donde, pase lo que pase, sea contigo.</p>
  <p><strong>Eres mi decisi√≥n constante.</strong></p>
  <p><strong>Feliz d√≠a, Diana üñ§</strong></p>
</div>

</div>
</div>

<audio id="music" src="cancion.mp3"></audio>

<script>
/* Part√≠culas */
const canvas=document.getElementById("particles");
const ctx=canvas.getContext("2d");
let w,h;
function resize(){w=canvas.width=innerWidth;h=canvas.height=innerHeight}
addEventListener("resize",resize);resize();

const particles=[...Array(70)].map(()=>({
  x:Math.random()*w,y:Math.random()*h,
  r:Math.random()*1.5+.5,
  vx:Math.random()*.25-.125,
  vy:Math.random()*.25-.125,
  o:Math.random()*.6+.25
}));

(function animate(){
  ctx.clearRect(0,0,w,h);
  particles.forEach(p=>{
    p.x+=p.vx;p.y+=p.vy;
    if(p.x<0)p.x=w;if(p.x>w)p.x=0;
    if(p.y<0)p.y=h;if(p.y>h)p.y=0;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle=`rgba(200,160,255,${p.o})`;
    ctx.fill();
  });
  requestAnimationFrame(animate);
})();

/* L√≥gica */
const noBtn=document.getElementById("noBtn");
const yesBtn=document.getElementById("yesBtn");
const sadGif=document.getElementById("sadGif");
const letter=document.getElementById("letter");
const prelude=document.getElementById("prelude");
const music=document.getElementById("music");

const noTexts=[
"No üòî","Ay ü§ß","¬øC√≥mo? üò±","Es broma, ¬øverdad? ü•≤","¬øPor qu√©? üò≠",
"Me duele un poco üíî","Pi√©nsalo bien‚Ä¶ ü•π","√öltima oportunidad üò∂","Est√° bien‚Ä¶"
];

let noCount=0, yesCount=0;
const lockAt=Math.ceil(noTexts.length/2);

noBtn.addEventListener("click",()=>{
  noCount++;
  if(noCount<noTexts.length){
    noBtn.textContent=noTexts[noCount];
  }else{
    sadGif.style.display="block";
    noBtn.style.display="none";
  }

  yesBtn.style.boxShadow=`0 0 ${15+noCount*6}px rgba(220,180,255,.9)`;

  if(noCount>=lockAt){
    yesBtn.disabled=true;
    yesBtn.textContent="No, ya no üôÇ‚Äç‚ÜîÔ∏è";
    yesBtn.style.background="#555";
    yesBtn.style.boxShadow="none";
  }
});

yesBtn.addEventListener("click",()=>{
  if(yesBtn.disabled) return;
  yesCount++;
  if(yesCount===1){
    yesBtn.textContent="¬øDe verdad? ‚ò∫Ô∏è";
  }else if(yesCount===2){
    yesBtn.textContent="¬øEn serio en serio? ü•π";
  }else{
    music.play();
    prelude.style.display="none";   // üëà CLAVE
    letter.style.display="block";
  }
});
</script>

</body>
</html>
